<%- include ('../../partials/header.ejs'); %>

<body>
    <%- include ('../../partials/navbar.ejs'); %>

    <div class="container" id="container">
        <h2>Editar Artigo</h2>
        <div class="card">
            <div class="card-title">
                <h3>Artigo: <%- article.title%></h2>
            </div>
            <div class="card-body">
                <form action="/articles/update" method="post" >
                    <input class="form-control" type="text" name="title" placeholder="Defina o titulo do artigo"><br>
                    <input type="hidden" value="<%- article.id %>" name="id">
                    <label>Categoria</label>
                    <select name="category" class="form-control">
                        <% categories.forEach(category => { %>
                            <% if(category.id == article.categoryId){ %>
                                <option value="<%- category.id %>" selected><%= category.title %></option>
                                <%} else { %>
                                    <option value="<%- category.id %>" ><%= category.title %></option>
                               <% } %>
                        <% }) %>
                    </select>
                    <br>
                    <textarea id='article' class="form-control" placeholder="Escreve aqui o seu artigo" name="body"><%- article.body%></textarea>
                    <br>
                    <button class="btn btn-success" id="enviar">Salvar</button>
                </form>
            </div>           
        </div>
    </div>
</body>

<%- include ('../../partials/footer.ejs'); %>

</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tinymce/4.5.6/tinymce.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/tinymce/4.5.6/jquery.tinymce.min.js"></script>
<script>
    tinymce.init({
        selector: '#article',
        height: 500,
        menubar: true,
        plugins: [
            'advlist autolink lists link image charmap print preview anchor',
            'searchreplace visualblocks code fullscreen',
            'insertdatetime media table contextmenu paste code help wordcount'
        ],
       
    });
    
</script>